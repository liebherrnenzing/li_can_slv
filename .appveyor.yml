version: 1.0.0-{build}
os:
- Visual Studio 2015
cache:
- '%LOCALAPPDATA%\pip\Cache'
environment:
  COVERALLS_REPO_TOKEN:
    secure: A/MsOTDW2blXDWx++futJDqFaRfH8a6JJpD0eKwBHNzDChCM7M+TgZl9dAH3vG7f
  matrix:
  - PYTHON_DIR: C:\Python37-x64
install:
- SET PATH=%PYTHON_DIR%;%PYTHON_DIR%\Scripts;%PATH%
- python -m pip install --upgrade pip
- pip install -r requirements.txt
- pip install codecov
build_script:
- inv configure
- inv all
test_script:
- inv test
- inv test_junit
after_test:
- inv cov_xml
- cd build
- codecov -X gcov
on_finish: 
  - ps: |
      $wc = New-Object 'System.Net.WebClient'
      $wc.UploadFile("https://ci.appveyor.com/api/testresults/junit/$($env:APPVEYOR_JOB_ID)", (Resolve-Path .\verify\result.xml))
     
        
        